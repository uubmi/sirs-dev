<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>




<head>
  <title>Free Clinic</title>
  <style type="text/css">
	#authenticatonDiv
	{
		position:fixed;
		padding:5%;
		margin:0;
		width: 100%;
		height: 100%;
    	background-color: #9F9F9F;
		color: #FFFFFF;
		text-align:center;
		height:100%;
		width:100%;
	}
	
	#selectPatientDiv
	{
		padding:1%;
		margin:0;
		width: 100%;
		height: 5%;
    	background-color: #9F9F9F;
		color: #FFFFFF;
		text-align:center;
	}
	
	input {margin:5px;}
  </style>


  <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
<!--I made a new change-->
  <script>
	var patientObjectsArray = [
		{'id':'401','name':'Issac A Lot','gender':'male','temperature':'40'
			,'heartRate':'120'
			,'respiratoryRate':'24'
			,'whiteBloodCellCount':'15'}, //'SIRScriteria':1 SIRS met!
		{'id':'504','name':'Ima Eel Thee','gender':'female','temperature':'37'
			,'heartRate':'70'
			,'respiratoryRate':'15'
			,'whiteBloodCellCount':'8'}, //'SIRScriteria':0 SIRS not met, no missing values
		{'id':'default','name':'New Patient','gender':'default','temperature':'default'
			,'heartRate':'default'
			,'respiratoryRate':'default'
			,'whiteBloodCellCount':'default'} //'SIRScriteria':-1 missing values  
	]; 
	
	var clinicianObjects = {'111':{'name':'Jack','role':'Nurse'},'101':{'name':'Jill','role':'Doctor'}};
	var currentPatient;
	var currentClinician;
	//create drop down based on patientObjects
	//function dropDownMaker () {}
	function authentication(userID) { 
		el = document.getElementById('authenticatonDiv'); 
		if(el.style.display == 'none'){ el.style.display = ''; }
		else { el.style.display = 'none'; } 
		
		el2 = document.getElementById('selectPatientDiv'); 
		if(el2.style.display == 'none'){ el2.style.display = ''; }
		else { el2.style.display = 'none'; } 
		
	  currentClinician = clinicianObjects[userID];
	  console.log(clinicianObjects);
	  console.log(userID);
	  //create dropdown for patient selection
		d3.select("#selectPatients")
			.selectAll("option")
			.data(patientObjectsArray,function(d){return d.name})
			.enter()
			.append("option")
			//Provide available text for the dropdown options
			.attr("value",function(d) {return d.key;})
			.text(function(d) {return d.name;});
	
	  //create greeting of Clinician
		el3 = document.getElementById('greetClinician'); 
		el3.innerHTML = "Wellcome to the Clinic "+currentClinician.role+" "+currentClinician.name;
		
		return false; 
	}
  </script>
</head>
<body >
	<div class="mainContent">
		<div id="authenticatonDiv" > <!--needs to cover entire page-->
			<form id="getUserId"><!-- method="post" action="authentication(value);" -->
			<!--get id then alter value on page for id-->
				<div class="question">
					<span div class="questionLable">Enter your unique login ID (for Demo use 111 for Nurse Jack or 101 for Doctor Jill) then press authenticate</span>
                     <span class="choices"><input type="number" id="userID"> <!--onchange="authentication()"--></span></br>
					 <input type="button" value="Authenticate" onclick="authentication(document.getElementById('userID').value)" />
				</div>
			</form>
		</div>

		<div id="greetClinician">
		</div>
		
		<div id="selectPatientDiv" style="display:none;">
			<!--drop down OR images OR drop-down with images-->
			<!--once patient selected then values populate OR if new patient selected then is blank-->
			Please select a patient 
			<select id="selectPatients" >
			</select>
			<!--script language='javascript'> //here is what happens when a patient is selected - the id is added to the URL
				d3.select('#selectPatients').on("change", function() {
					var key = this.value;
					alert(key);
					var viewing = this.value;
					window.location = [location.href, "?viewing=", viewing].join('');
				});	
			</script-->
		</div>
		
		<div id="patientData">
			<!--responds to drop down in select patient
			Name
			ID
			SIRS Criteria-->
			<form id="patientData">
				<span id="patientName">
				<script></script>
				</span></br>
				<span class="choices">temperature<input type="number" id="temperature"> </span></br>
				<span class="choices">heart rate<input type="number" id="heartRate"> </span></br>
				<span class="choices">respiratory rate<input type="number" id="respiratoryRate"> </span></br>
				<span class="choices">white blood cell count<input type="number" id="whiteBloodCellCount"></span></br>
			</form>	
			<!--script language="javascript">  
				var currentPatientName = url('?viewing');
			</script-->
			<input type="button" value="Log Out?" onclick="authentication()" />
			
			<div id="developmentTesting" >
				<input type="button" value="Run Development Test" onclick="testCases();" />
			
				<script src="sirs-cds.js" charset="utf-8"></script>
				<script src="runCheck.js" charset="utf-8"></script>
				<script>
					//for development testing
					function testCases() {
						for (var i = 0, pat; pat = patients[i++];) {
							console.log("assessing patient #"+i);
							testSIRS(pat);
						}
					}
				</script>
			</div>
			
		</div>
	</div>
</body>
</html>
